<form class="form-horizontal" role="form" id="topic-add-form" name="topicFormValidation" x-form-reset x-reset="formReset" ng-submit="addTopic(topicFormValidation)" novalidate> <div class="form-group" ng-class="{'has-error':topicFormValidation.title.$invalid&&submitted,'has-success':topicFormValidation.title.$valid&&submitted}"> <label for="title" class="col-sm-1 control-label">专题名称</label> <div class="col-sm-6"> <input type="input" ng-model="topicForm.title" class="form-control" id="title" placeholder="专题名称" ng-minlength="5" ng-maxlength="15" maxlength="15" required="required" name="title"> <p ng-show="topicFormValidation.title.$error.required&&submitted" class="help-block"> 专题名称不能为空</p> <p ng-show="(topicFormValidation.title.$error.minlength||topicFormValidation.title.$error.maxlength)&&submitted" class="help-block"> 专题名称为5-15个字符长度</p> </div> </div> <div class="form-group" ng-class="{'has-error':topicFormValidation.introduce.$invalid&&submitted,'has-success':topicFormValidation.introduce.$valid&&submitted}"> <label for="introduce" class="col-sm-1 control-label">专题简介</label> <div class="col-sm-6"> <textarea type="input" ng-model="topicForm.introduce" class="form-control" id="introduce" placeholder="专题简介" ng-minlength="5" ng-maxlength="70" required="required" name="introduce"></textarea> <p ng-show="topicFormValidation.introduce.$error.required&&submitted" class="help-block"> 专题简介不能为空</p> <p ng-show="(topicFormValidation.introduce.$error.minlength||topicFormValidation.introduce.$error.maxlength)&&submitted" class="help-block"> 专题简介为5-70个字符长度</p> </div> </div> <div class="form-group" ng-show="addedApp.length==0&&submitted" ng-class="{'has-error':addedApp.length==0&&submitted,'has-success':addedApp.length>0&&submitted}"> <label class="col-sm-1 control-label">已指定app</label> <div class="col-sm-10"> <img ng-src="{{app.imgSrc}}" ng-repeat="app in addedApp" alt="应用ICON"> <p ng-show="addedApp.length==0&&submitted" class="help-block"> 指定的app不能为空</p> </div> </div> <div class="form-group" ng-class="{'has-error':topicFormValidation.indexPic.$invalid&&submitted,'has-success':topicFormValidation.indexPic.$valid&&submitted}"> <label for="indexPic" class="col-sm-1 control-label">专题大图</label> <div class="col-sm-6"> <p class="form-control-static">1340px*480px</p> <input type="file" ng-if="topic.indexPicUrl" name="indexPic" id="indexPic" placeholder="请选择专题大图" data-preview-img="#index-pic-preview-img" data-set-file="topic.indexPicFiles" x-file-type="image" x-img-size="1340*480" ng-model="topic.xxxx"> <input type="file" ng-if="!topic.indexPicUrl" name="indexPic" id="indexPic" placeholder="请选择专题大图" data-preview-img="#index-pic-preview-img" data-set-file="topic.indexPicFiles" x-file-type="image" x-img-size="1340*480" x-file-required ng-model="topic.xxxx">  <img id="index-pic-preview-img" ng-src="{{topic.indexPicUrl}}" x-clear-img x-clear="imgClear" alt="点击我预览大图" x-view-img x-img-title="专题大图"> <p ng-show="topicFormValidation.indexPic.$error.required&&submitted" class="help-block"> 专题大图不能为空</p> <p ng-show="topicFormValidation.indexPic.$error.fileType&&submitted" class="help-block"> 请选择图片文件</p> <p ng-show="topicFormValidation.indexPic.$error.imgSize&&submitted" class="help-block"> 请选择1340*480px的图片</p> </div> </div> <div class="form-group" ng-class="{'has-error':topicFormValidation.banner.$invalid&&submitted,'has-success':topicFormValidation.banner.$valid&&submitted}"> <label for="banner" class="col-sm-1 control-label">专题内图</label> <div class="col-sm-6"> <p class="form-control-static">1340px*480px</p> <input type="file" ng-if="topic.bannerUrl" name="banner" id="banner" placeholder="请选择专题内图" data-preview-img="#banner-preview-img" data-set-file="topic.bannerFiles" x-file-type="image" x-img-size="1340*480" ng-model="topic.xxxx"> <input type="file" ng-if="!topic.bannerUrl" name="banner" id="banner" placeholder="请选择专题内图" data-preview-img="#banner-preview-img" data-set-file="topic.bannerFiles" x-file-type="image" x-img-size="1340*480" ng-model="topic.xxxx" x-file-required>  <img id="banner-preview-img" ng-src="{{topic.bannerUrl}}" x-clear-img x-clear="imgClear" alt="点击我预览大图" x-view-img x-img-title="专题内图"> <p ng-show="topicFormValidation.banner.$error.required&&submitted" class="help-block"> 专题内图不能为空</p> <p ng-show="topicFormValidation.banner.$error.fileType&&submitted" class="help-block"> 请选择图片文件</p> <p ng-show="topicFormValidation.banner.$error.imgSize&&submitted" class="help-block"> 请选择1340*480px的图片</p> </div> </div> <div class="form-group" ng-class="{'has-error':topicFormValidation.background.$invalid&&submitted,'has-success':topicFormValidation.background.$valid&&submitted}"> <label for="background" class="col-sm-1 control-label">专题底图</label> <div class="col-sm-6"> <p class="form-control-static">1340px*480px</p> <input type="file" ng-if="topic.backgroundUrl" name="background" id="background" placeholder="请选择专题底图" data-preview-img="#background-preview-img" data-set-file="topic.backgroundFiles" x-file-type="image" x-img-size="1340*480" ng-model="topic.xxxx"> <input type="file" ng-if="!topic.backgroundUrl" name="background" id="background" placeholder="请选择专题底图" data-preview-img="#background-preview-img" data-set-file="topic.backgroundFiles" x-file-type="image" x-img-size="1340*480" ng-model="topic.xxxx" x-file-required>  <img id="background-preview-img" ng-src="{{topic.backgroundUrl}}" x-clear-img x-clear="imgClear" alt="点击我预览大图" x-view-img x-img-title="专题底图"> <p ng-show="topicFormValidation.background.$error.required&&submitted" class="help-block"> 专题底图不能为空</p> <p ng-show="topicFormValidation.background.$error.fileType&&submitted" class="help-block"> 请选择图片文件</p> <p ng-show="topicFormValidation.background.$error.imgSize&&submitted" class="help-block"> 请选择1340*480px的图片</p> </div> </div> </form>  <div class="form-horizontal"> <div class="form-group"> <label class="col-sm-1 control-label">添加应用</label> <div class="col-sm-10"> <x-app-search> <div class="panel panel-default"> <div class="panel-heading text-center">选中应用列表</div> <div class="panel-body"> <table class="table table-condensed"> <thead> <tr> <th>序号</th> <th>应用ICON</th> <th>应用名称</th> <th>快用发布时间</th> <th>一句话简介</th> <th>应用版本</th> <th>应用更新日期</th> <th>应用类别</th> <th>应用状态</th> <th>应用价格</th> <th>操作</th> </tr> </thead> <tbody> <tr ng-repeat="app in addedApp" data-app-id="{{app.APPID}}"> <td>{{$index+1}}</td> <td><img ng-src="{{app.imgSrc}}"></td> <td>{{app.APPNAME}}</td> <td>{{app.APPINSERTTIME}}</td> <td>{{app.APPINTRO}} </td> <td>{{app.APPVERSION}}</td> <td>{{app.updateTime}}</td> <td>{{app.CATEGORYNAME}}</td> <td>{{app.appStatus}}</td> <td>{{app.APPPRICE}}</td> <td> <div class="btn-group btn-group-sm"> <button type="button" class="btn btn-default" ng-click="deleteApp(app)">删除 </button> </div> </td> </tr> </tbody> </table> </div> </div> </x-app-search> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-1"> <button type="submit" class="btn btn-info" form="topic-add-form" x-submitting="发布中..." x-is-submitting="publishing"> 发布 </button> <button class="btn btn-info" ng-click="saveToDraft(topicFormValidation)" x-submitting="保存中..." x-is-submitting="saving">存为草稿 </button> </div> </div> <template id="extend-end-form" class="hide"> <form name="extendEndFormValidation" ng-submit="addExtendEnd(extendEndFormValidation.$valid)" class="form-horizontal"> <div class="form-group">  <div class="col-xs-12"> <x-date-picker data-date-format="yyyy-mm-dd" required="required" name="extendEnd" ng-model="topic.extendEnd"></x-date-picker> </div> </div> <div class="form-group"> <div class="col-sm-offset-8"> <button type="submit" class="btn btn-default trigger-hide">确定</button> </div> </div> </form> </template> <template id="app-intro-form" class="hide"> <form class="form-horizontal"> <div class="form-group"> <div class="col-xs-12"> <textarea placeholder="一句话简介" style="width:230px" rows="8" value=""></textarea> </div> </div> <div class="form-group"> <div class="col-sm-offset-8"> <button type="submit" class="btn btn-default">确定</button> </div> </div> </form> </template>