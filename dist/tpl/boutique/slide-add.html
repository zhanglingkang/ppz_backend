<form class="form-horizontal" role="form" id="slide-add-form" name="slideFormValidation" x-form-reset x-reset="formReset" ng-submit="addSlide(slideFormValidation)" novalidate> <div class="form-group" ng-class="{'has-error':slideFormValidation.releaseTime.$invalid&&submitted,'has-success':slideFormValidation.releaseTime.$valid&&submitted}"> <label class="col-sm-1 control-label">发布日期</label> <div class="col-sm-6">  <x-date-picker data-date-format="yyyy-mm-dd" required="required" name="releaseTime" ng-model="slideForm.release_time"></x-date-picker> <p ng-show="slideFormValidation.releaseTime.$error.required&&submitted" class="help-block"> 发布日期不能为空</p> </div> </div> <div class="form-group" ng-class="{'has-error':slideFormValidation.link.$invalid&&submitted,'has-success':slideFormValidation.link.$valid&&submitted}"> <label class="col-sm-1 control-label">链接到</label> <div class="col-sm-10"> <label class="radio-inline"> <input type="radio" name="link" value="0" ng-model="slideForm.link" required="required"> 应用详情 </label> <label class="radio-inline"> <input type="radio" name="link" value="1" ng-model="slideForm.link" required="required"> 文章 </label> <p ng-show="slideFormValidation.link.$error.required&&submitted" class="help-block"> 链接类型不能为空</p> </div> </div> <div class="form-group" ng-class="{'has-error':slideFormValidation.title.$invalid&&submitted,'has-success':slideFormValidation.title.$valid&&submitted}"> <label for="caption" class="col-sm-1 control-label">标题</label> <div class="col-sm-6"> <input type="input" ng-model="slideForm.title" class="form-control" id="caption" placeholder="标题" ng-minlength="5" ng-maxlength="20" required="required" name="title"> <p ng-show="slideFormValidation.title.$error.required&&submitted" class="help-block"> 标题不能为空</p> <p ng-show="(slideFormValidation.title.$error.minlength||slideFormValidation.title.$error.maxlength)&&submitted" class="help-block"> 标题为5-20个字符长度</p> </div> </div>         <div class="form-group" ng-show="addedApp.length!==needAppCount&&submitted" ng-if="slideForm.link==0" ng-class="{'has-error':addedApp.length!==needAppCount&&submitted,'has-success':addedApp.length==needAppCount&&submitted}"> <label class="col-sm-1 control-label">已指定app</label> <div class="col-sm-10"> <div class="row"> <div ng-repeat="app in addedApp" style="display:inline-block"> <a class="thumbnail"> <img ng-src="{{app.imgSrc}}" alt="应用ICON"> </a> </div> </div> <p ng-show="addedApp.length!==needAppCount&&submitted" class="help-block"> 必须选择{{needAppCount}}个app</p> </div> </div> <div class="form-group" ng-show="addedArticle.length!==needArticleCount&&submitted" ng-if="slideForm.link==1" ng-class="{'has-error':addedArticle.length!=needArticleCount&&submitted,'has-success':addedArticle.length==needArticleCount&&submitted}"> <label class="col-sm-1 control-label">已选择文章</label> <div class="col-sm-10"> <div class="row"> <div ng-repeat="article in addedArticle"> {{article.title}} </div> </div> <p ng-show="addedArticle.length!==needArticleCount&&submitted" class="help-block"> 必须选择{{needArticleCount}}篇文章</p> </div> </div> <div class="form-group" ng-class="{'has-error':slideFormValidation.imageFile.$invalid&&submitted,'has-success':slideFormValidation.imageFile.$valid&&submitted}"> <label for="picture" class="col-sm-1 control-label">选择轮播图</label> <div class="col-sm-6"> <p class="form-control-static">1340px*480px</p> <input type="file" ng-if="slide.imgUrl" name="imageFile" id="picture" placeholder="请选择轮播图" data-preview-img="#slide-add-preview-img" data-set-file="slide.slidePicFiles" x-file-type="image" x-img-size="1340*480" ng-model="slide.xxxx"> <input type="file" ng-if="!slide.imgUrl" name="imageFile" id="picture" placeholder="请选择轮播图" data-preview-img="#slide-add-preview-img" data-set-file="slide.slidePicFiles" x-file-type="image" x-img-size="1340*480" x-file-required ng-model="slide.xxxx">  <img id="slide-add-preview-img" ng-src="{{slide.imgUrl}}" x-clear-img x-clear="imgClear" alt="点击我预览大图" x-view-img x-img-title="文章首图"> <p ng-show="slideFormValidation.imageFile.$error.required&&submitted" class="help-block"> 轮播图不能为空</p> <p ng-show="slideFormValidation.imageFile.$error.fileType&&submitted" class="help-block"> 请选择图片文件</p> <p ng-show="slideFormValidation.imageFile.$error.imgSize&&submitted" class="help-block"> 请选择1340*480px的图片</p> </div> </div> </form>  <div class="form-horizontal" ng-if="slideForm.link==0"> <div class="form-group"> <label class="col-sm-1 control-label">添加应用</label> <div class="col-sm-10"> <x-app-search> <div class="panel panel-default"> <div class="panel-heading text-center">选中应用列表</div> <div class="panel-body"> <table class="table table-condensed"> <thead> <tr> <th>序号</th> <th>应用ICON</th> <th>应用名称</th> <th>快用发布时间</th> <th>一句话简介</th> <th>应用版本</th> <th>应用更新日期</th> <th>应用类别</th> <th>应用状态</th> <th>应用价格</th> <th>操作</th> </tr> </thead> <tbody x-drag-sort="data-drag-id" x-drag-completed="sortApp"> <tr ng-repeat="app in addedApp" data-app-id="{{app.APPID}}"> <td>{{$index+1}}</td> <td><img ng-src="{{app.imgSrc}}"></td> <td>{{app.APPNAME}}</td> <td>{{app.APPINSERTTIME}}</td> <td><a x-selector="#app-intro-form" title="一句话简介" x-popover x-close="deletePopover" data-placement="top" x-style="height:250px;width:280px;">{{app.introduce}}</a> </td> <td>{{app.APPVERSION}}</td> <td>{{app.updateTime}}</td> <td>{{app.CATEGORYNAME}}</td> <td>{{app.appStatus}}</td> <td>{{app.APPPRICE}}</td> <td> <div class="btn-group btn-group-sm"> <button type="button" class="btn btn-default" ng-click="deleteApp(app)">删除 </button> </div> </td> </tr> </tbody> </table> </div> </div> </x-app-search> </div> </div> </div> <div class="form-horizontal" ng-if="slideForm.link==1"> <div class="form-group"> <label class="col-sm-1 control-label">添加文章</label> <div class="col-sm-10"> <x-article-search> <div class="panel panel-default"> <div class="panel-heading text-center">选中文章列表</div> <div class="panel-body"> <table class="table table-condensed table-bordered"> <thead> <tr> <td>位置</td> <td>文章标题</td> <td>发布时间</td> <td>首图</td> <td>类型</td> <td>内容预览</td> <td>app个数</td> <td>操作</td> </tr> </thead> <tbody x-drag-sort="data-drag-id"> <tr ng-repeat="article in addedArticle" data-drag-id="{{article.id}}"> <td>{{$index+1}}</td> <td>{{article.title}}</td> <td>{{article.release_time}}</td> <td><img ng-src="{{article.first_pic}}" class="index-picture" x-view-img x-img-title="首图"></td> <td>{{article.content}}</td> <td><span data-toggle="tooltip" data-placement="bottom" data-original-title="{{article.text}}" x-tooltip>{{article.text}}</span></td> <td>{{article.appTotal}}</td> <td> <div class="btn-group btn-group-sm"> <button type="button" class="btn btn-default" ng-click="deleteArticle(article)"> 删除 </button> </div> </td> </tr> </tbody> </table> </div> </div> </x-article-search> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-1 col-sm-10"> <button type="submit" class="btn btn-info" form="slide-add-form" x-submitting x-is-submitting="submitting"> 提交 </button> </div> </div> <template id="app-intro-form" class="hide" ng-include="introduceTemplateUrl"> </template> <div class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" ng-show="showRepeatedHint" style="display:block"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="showRepeatedHint=false;"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button> <h4 class="modal-title">温馨提示</h4> </div> <div class="modal-body"> <div ng-repeat="app in repeatedApp" style="word-break:break-all"> App<strong>“{{app.APPNAME}}”</strong>在最近十天内 <strong ng-repeat="oneRepeat in app.repeat">&nbsp;“{{oneRepeat.release_time}}”&nbsp;</strong> 已经添加过 </div> 确认重复添加吗？ </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="showRepeatedHint=false;">取消 </button> <button type="button" class="btn btn-primary confirm" ng-click="showRepeatedHint=false;confirmSubmit();"> 确定 </button> </div> </div> </div> </div>